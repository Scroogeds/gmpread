<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="js/jquery-3.3.1.min.js"></script>
    <link href="cron/themes/bootstrap/easyui.css" rel="stylesheet" type="text/css" />
    <link href="cron/themes/icon.css" rel="stylesheet" type="text/css" />
    <link href="cron/icon.css" rel="stylesheet" type="text/css" />
    <script src="cron/jquery.easyui.min.js" type="text/javascript"></script>
    <script src="cron/cron.js" type="text/javascript"></script>
    <style type="text/css">
        .line
        {
            height: 25px;
            line-height: 25px;
            margin: 3px;
        }
        .imp
        {
            padding-left: 25px;
        }
        .col
        {
            width: 95px;
        }
        .box-loading {
            width: 100%;
            height: 100%;
            background-color: #c5c5c5;
            position: fixed;
            top: 0;
            z-index: 1000;
            opacity: 0.75;
            display: none;
        }
    </style>
    <style type="text/css">
        .sk-circle {
            margin: 40px auto;
            width: 40px;
            height: 40px;
            position: relative; }
        .sk-circle .sk-child {
            width: 100%;
            height: 100%;
            position: absolute;
            left: 0;
            top: 0; }
        .sk-circle .sk-child:before {
            content: '';
            display: block;
            margin: 0 auto;
            width: 15%;
            height: 15%;
            background-color: #333;
            border-radius: 100%;
            -webkit-animation: sk-circleBounceDelay 1.2s infinite ease-in-out both;
            animation: sk-circleBounceDelay 1.2s infinite ease-in-out both; }
        .sk-circle .sk-circle2 {
            -webkit-transform: rotate(30deg);
            -ms-transform: rotate(30deg);
            transform: rotate(30deg); }
        .sk-circle .sk-circle3 {
            -webkit-transform: rotate(60deg);
            -ms-transform: rotate(60deg);
            transform: rotate(60deg); }
        .sk-circle .sk-circle4 {
            -webkit-transform: rotate(90deg);
            -ms-transform: rotate(90deg);
            transform: rotate(90deg); }
        .sk-circle .sk-circle5 {
            -webkit-transform: rotate(120deg);
            -ms-transform: rotate(120deg);
            transform: rotate(120deg); }
        .sk-circle .sk-circle6 {
            -webkit-transform: rotate(150deg);
            -ms-transform: rotate(150deg);
            transform: rotate(150deg); }
        .sk-circle .sk-circle7 {
            -webkit-transform: rotate(180deg);
            -ms-transform: rotate(180deg);
            transform: rotate(180deg); }
        .sk-circle .sk-circle8 {
            -webkit-transform: rotate(210deg);
            -ms-transform: rotate(210deg);
            transform: rotate(210deg); }
        .sk-circle .sk-circle9 {
            -webkit-transform: rotate(240deg);
            -ms-transform: rotate(240deg);
            transform: rotate(240deg); }
        .sk-circle .sk-circle10 {
            -webkit-transform: rotate(270deg);
            -ms-transform: rotate(270deg);
            transform: rotate(270deg); }
        .sk-circle .sk-circle11 {
            -webkit-transform: rotate(300deg);
            -ms-transform: rotate(300deg);
            transform: rotate(300deg); }
        .sk-circle .sk-circle12 {
            -webkit-transform: rotate(330deg);
            -ms-transform: rotate(330deg);
            transform: rotate(330deg); }
        .sk-circle .sk-circle2:before {
            -webkit-animation-delay: -1.1s;
            animation-delay: -1.1s; }
        .sk-circle .sk-circle3:before {
            -webkit-animation-delay: -1s;
            animation-delay: -1s; }
        .sk-circle .sk-circle4:before {
            -webkit-animation-delay: -0.9s;
            animation-delay: -0.9s; }
        .sk-circle .sk-circle5:before {
            -webkit-animation-delay: -0.8s;
            animation-delay: -0.8s; }
        .sk-circle .sk-circle6:before {
            -webkit-animation-delay: -0.7s;
            animation-delay: -0.7s; }
        .sk-circle .sk-circle7:before {
            -webkit-animation-delay: -0.6s;
            animation-delay: -0.6s; }
        .sk-circle .sk-circle8:before {
            -webkit-animation-delay: -0.5s;
            animation-delay: -0.5s; }
        .sk-circle .sk-circle9:before {
            -webkit-animation-delay: -0.4s;
            animation-delay: -0.4s; }
        .sk-circle .sk-circle10:before {
            -webkit-animation-delay: -0.3s;
            animation-delay: -0.3s; }
        .sk-circle .sk-circle11:before {
            -webkit-animation-delay: -0.2s;
            animation-delay: -0.2s; }
        .sk-circle .sk-circle12:before {
            -webkit-animation-delay: -0.1s;
            animation-delay: -0.1s; }

        @-webkit-keyframes sk-circleBounceDelay {
            0%, 80%, 100% {
                -webkit-transform: scale(0);
                transform: scale(0); }
            40% {
                -webkit-transform: scale(1);
                transform: scale(1); } }

        @keyframes sk-circleBounceDelay {
            0%, 80%, 100% {
                -webkit-transform: scale(0);
                transform: scale(0); }
            40% {
                -webkit-transform: scale(1);
                transform: scale(1); } }

    </style>
</head>
<body>
    <div style="margin: auto;width:1300px;height:100%;">

        <div id="mainFrame">
            <br />
            <div id="wshell" style="margin-left: -650px">
                <span style="font-weight: bolder" id="serviceIP">服务器备份数据库配置页面</span>
                <a href="/content/get?selectSystem=1" target="myFrameName" id="getContent"><button id="watchShell" class="sub">备份脚本</button></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <!--<button id="showAndConceal" class="sub" style="display: none;" onclick="showAndConcealShell()">隐藏/显示脚本</button>-->
            </div>
            <br />
            <br />
            <form action="/content/save-path-timing" method="post">

                <div style="width:620px;height:80px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;" class="easyui-layout" id="hepx"><!--align="left"-->
                    <span style="float: left; color: #104E8B; font-weight: bold">&nbsp;&nbsp;备份文件/文件夹</span><br/>
                    <input id="filePathString" name="filePathString" type="text" style="display: none;">
                    filePath&nbsp;&nbsp;&nbsp;<button name="addfp" class="sub">+</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button name="delfp" class="sub">-</button><br/>
                    <div name="fp"></span><input name="fpValue" type="text" placeholder="/opt/backups"></div>
                </div>

                    <div class="easyui-layout" style="width:620px;height:400px; border: 1px rgb(202, 196, 196) solid;
            border-radius: 5px;">
                        <span style="float: left; color: #104E8B; font-weight: bold">&nbsp;&nbsp;备份时间规则配置</span><br/>
                        <div style="height: 100%;">
                            <div class="easyui-tabs" data-options="fit:true,border:false">
                                <div title="分钟">
                                    <div class="line">
                                        <input type="radio" checked="checked" name="min" onclick="everyTime(this)">
                                        分钟 允许的通配符[, - * /]</div>
                                    <div class="line">
                                        <input type="radio" name="min" onclick="cycle(this)">
                                        周期从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:58" value="1"
                                               id="minStart_0">
                                        -
                                        <input class="numberspinner" style="width: 60px;" data-options="min:2,max:59" value="2"
                                               id="minEnd_0">
                                        分钟</div>
                                    <div class="line">
                                        <input type="radio" name="min" onclick="startOn(this)">
                                        从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:0,max:59" value="0"
                                               id="minStart_1">
                                        分钟开始,每
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:59" value="1"
                                               id="minEnd_1">
                                        分钟执行一次</div>
                                    <div class="line">
                                        <input type="radio" name="min" id="min_appoint">
                                        指定</div>
                                    <div class="imp minList">
                                        <input type="checkbox" value="0">00
                                        <input type="checkbox" value="1">01
                                        <input type="checkbox" value="2">02
                                        <input type="checkbox" value="3">03
                                        <input type="checkbox" value="4">04
                                        <input type="checkbox" value="5">05
                                        <input type="checkbox" value="6">06
                                        <input type="checkbox" value="7">07
                                        <input type="checkbox" value="8">08
                                        <input type="checkbox" value="9">09
                                        <input type="checkbox" value="10">10
                                        <input type="checkbox" value="11">11
                                        <input type="checkbox" value="12">12
                                        <input type="checkbox" value="13">13
                                        <input type="checkbox" value="14">14</div>
                                    <div class="imp minList">
                                        <input type="checkbox" value="15">15
                                        <input type="checkbox" value="16">16
                                        <input type="checkbox" value="17">17
                                        <input type="checkbox" value="18">18
                                        <input type="checkbox" value="19">19
                                        <input type="checkbox" value="20">20
                                        <input type="checkbox" value="21">21
                                        <input type="checkbox" value="22">22
                                        <input type="checkbox" value="23">23
                                        <input type="checkbox" value="24">24
                                        <input type="checkbox" value="25">25
                                        <input type="checkbox" value="26">26
                                        <input type="checkbox" value="27">27
                                        <input type="checkbox" value="28">28
                                        <input type="checkbox" value="29">29</div>
                                    <div class="imp minList">
                                        <input type="checkbox" value="30">30
                                        <input type="checkbox" value="31">31
                                        <input type="checkbox" value="32">32
                                        <input type="checkbox" value="33">33
                                        <input type="checkbox" value="34">34
                                        <input type="checkbox" value="35">35
                                        <input type="checkbox" value="36">36
                                        <input type="checkbox" value="37">37
                                        <input type="checkbox" value="38">38
                                        <input type="checkbox" value="39">39
                                        <input type="checkbox" value="40">40
                                        <input type="checkbox" value="41">41
                                        <input type="checkbox" value="42">42
                                        <input type="checkbox" value="43">43
                                        <input type="checkbox" value="44">44</div>
                                    <div class="imp minList">
                                        <input type="checkbox" value="45">45
                                        <input type="checkbox" value="46">46
                                        <input type="checkbox" value="47">47
                                        <input type="checkbox" value="48">48
                                        <input type="checkbox" value="49">49
                                        <input type="checkbox" value="50">50
                                        <input type="checkbox" value="51">51
                                        <input type="checkbox" value="52">52
                                        <input type="checkbox" value="53">53
                                        <input type="checkbox" value="54">54
                                        <input type="checkbox" value="55">55
                                        <input type="checkbox" value="56">56
                                        <input type="checkbox" value="57">57
                                        <input type="checkbox" value="58">58
                                        <input type="checkbox" value="59">59
                                    </div>
                                </div>
                                <div title="小时">
                                    <div class="line">
                                        <input type="radio" checked="checked" name="hour" onclick="everyTime(this)">
                                        小时 允许的通配符[, - * /]</div>
                                    <div class="line">
                                        <input type="radio" name="hour" onclick="cycle(this)">
                                        周期从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:0,max:23" value="0"
                                               id="hourStart_0">
                                        -
                                        <!--<input class="numberspinner" style="width: 60px;" data-options="min:2,max:23" value="2"
                                               id="hourEnd_1">-->
                                        <input class="numberspinner" style="width: 60px;" data-options="min:2,max:23" value="2"
                                        >
                                        小时</div>
                                    <div class="line">
                                        <input type="radio" name="hour" onclick="startOn(this)">
                                        从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:0,max:23" value="0"
                                               id="hourStart_1">
                                        小时开始,每
                                        <!--<input class="numberspinner" style="width: 60px;" data-options="min:1,max:23" value="1"
                                               id="hourEnd_1">-->
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:23" value="1"
                                        >
                                        小时执行一次</div>
                                    <div class="line">
                                        <input type="radio" name="hour" id="hour_appoint">
                                        指定</div>
                                    <div class="imp hourList">
                                        AM:
                                        <input type="checkbox" value="0">00
                                        <input type="checkbox" value="1">01
                                        <input type="checkbox" value="2">02
                                        <input type="checkbox" value="3">03
                                        <input type="checkbox" value="4">04
                                        <input type="checkbox" value="5">05
                                        <input type="checkbox" value="6">06
                                        <input type="checkbox" value="7">07
                                        <input type="checkbox" value="8">08
                                        <input type="checkbox" value="9">09
                                        <input type="checkbox" value="10">10
                                        <input type="checkbox" value="11">11
                                    </div>
                                    <div class="imp hourList">
                                        PM:
                                        <input type="checkbox" value="12">12
                                        <input type="checkbox" value="13">13
                                        <input type="checkbox" value="14">14
                                        <input type="checkbox" value="15">15
                                        <input type="checkbox" value="16">16
                                        <input type="checkbox" value="17">17
                                        <input type="checkbox" value="18">18
                                        <input type="checkbox" value="19">19
                                        <input type="checkbox" value="20">20
                                        <input type="checkbox" value="21">21
                                        <input type="checkbox" value="22">22
                                        <input type="checkbox" value="23">23
                                    </div>
                                </div>
                                <div title="日">
                                    <div class="line">
                                        <input type="radio" checked="checked" name="day" onclick="everyTime(this)">
                                        日 允许的通配符[, - * / L W]</div>
                                    <div class="line">
                                        <input type="radio" name="day" onclick="cycle(this)">
                                        周期从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                                               id="dayStart_0">
                                        -
                                        <input class="numberspinner" style="width: 60px;" data-options="min:2,max:31" value="2"
                                               id="dayEnd_0">
                                        日</div>
                                    <div class="line">
                                        <input type="radio" name="day" onclick="startOn(this)">
                                        从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                                               id="dayStart_1">
                                        日开始,每
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:31" value="1"
                                               id="dayEnd_1">
                                        天执行一次</div>
                                    <div class="line">
                                        <input type="radio" name="day" id="day_appoint">
                                        指定</div>
                                    <div class="imp dayList">
                                        <input type="checkbox" value="1">1
                                        <input type="checkbox" value="2">2
                                        <input type="checkbox" value="3">3
                                        <input type="checkbox" value="4">4
                                        <input type="checkbox" value="5">5
                                        <input type="checkbox" value="6">6
                                        <input type="checkbox" value="7">7
                                        <input type="checkbox" value="8">8
                                        <input type="checkbox" value="9">9
                                        <input type="checkbox" value="10">10
                                        <input type="checkbox" value="11">11
                                        <input type="checkbox" value="12">12
                                        <input type="checkbox" value="13">13
                                        <input type="checkbox" value="14">14
                                        <input type="checkbox" value="15">15
                                        <input type="checkbox" value="16">16
                                    </div>
                                    <div class="imp dayList">
                                        <input type="checkbox" value="17">17
                                        <input type="checkbox" value="18">18
                                        <input type="checkbox" value="19">19
                                        <input type="checkbox" value="20">20
                                        <input type="checkbox" value="21">21
                                        <input type="checkbox" value="22">22
                                        <input type="checkbox" value="23">23
                                        <input type="checkbox" value="24">24
                                        <input type="checkbox" value="25">25
                                        <input type="checkbox" value="26">26
                                        <input type="checkbox" value="27">27
                                        <input type="checkbox" value="28">28
                                        <input type="checkbox" value="29">29
                                        <input type="checkbox" value="30">30
                                        <input type="checkbox" value="31">31
                                    </div>
                                </div>
                                <div title="月">
                                    <div class="line">
                                        <input type="radio" checked="checked" name="mouth" onclick="everyTime(this)">
                                        月 允许的通配符[, - * /]</div>
                                    <div class="line">
                                        <input type="radio" name="mouth" onclick="cycle(this)">
                                        周期从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                                               id="mouthStart_0">
                                        -
                                        <input class="numberspinner" style="width: 60px;" data-options="min:2,max:12" value="2"
                                               id="mouthEnd_0">
                                        月</div>
                                    <div class="line">
                                        <input type="radio" name="mouth" onclick="startOn(this)">
                                        从
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                                               id="mouthStart_1">
                                        日开始,每
                                        <input class="numberspinner" style="width: 60px;" data-options="min:1,max:12" value="1"
                                               id="mouthEnd_1">
                                        月执行一次</div>
                                    <div class="line">
                                        <input type="radio" name="mouth" id="mouth_appoint">
                                        指定</div>
                                    <div class="imp mouthList">
                                        <input type="checkbox" value="1">1
                                        <input type="checkbox" value="2">2
                                        <input type="checkbox" value="3">3
                                        <input type="checkbox" value="4">4
                                        <input type="checkbox" value="5">5
                                        <input type="checkbox" value="6">6
                                        <input type="checkbox" value="7">7
                                        <input type="checkbox" value="8">8
                                        <input type="checkbox" value="9">9
                                        <input type="checkbox" value="10">10
                                        <input type="checkbox" value="11">11
                                        <input type="checkbox" value="12">12
                                    </div>
                                </div>
                                <div title="周">
                                    <div class="line">
                                        <input type="radio" checked="checked" name="week" onclick="everyTime(this)">
                                        周 允许的通配符[, - * / L #]</div>
                                    <div class="line">
                                        <input type="radio" name="week" onclick="startOn(this)">
                                        周期 从星期<input class="numberspinner" style="width: 60px;" data-options="min:1,max:7"
                                                     id="weekStart_0" value="1">
                                        -
                                        <input class="numberspinner" style="width: 60px;" data-options="min:2,max:7" value="2"
                                               id="weekEnd_0"></div>
                                    <div class="line">
                                        <input type="radio" name="week" onclick="weekOfDay(this)">
                                        第<input class="numberspinner" style="width: 60px;" data-options="min:1,max:4" value="1"
                                                id="weekStart_1">
                                        周 的星期<input class="numberspinner" style="width: 60px;" data-options="min:1,max:7"
                                                    id="weekEnd_1" value="1"></div>
                                    <div class="line">
                                        <input type="radio" name="week" id="week_appoint">
                                        指定</div>
                                    <div class="imp weekList">
                                        <input type="checkbox" value="0">0
                                        <input type="checkbox" value="1">1
                                        <input type="checkbox" value="2">2
                                        <input type="checkbox" value="3">3
                                        <input type="checkbox" value="4">4
                                        <input type="checkbox" value="5">5
                                        <input type="checkbox" value="6">6
                                        <input type="checkbox" value="7">7
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div data-options="region:'south',border:false" style="height:150px" >
                            <fieldset style="border-radius: 3px; height: 116px; width: 595px;">
                                <legend>表达式</legend>
                                <table style="height: 100px;">
                                    <tbody>
                                    <tr>
                                        <td>
                                        </td>
                                        <td align="center">
                                            分钟
                                        </td>
                                        <td align="center">
                                            小时
                                        </td>
                                        <td align="center">
                                            日
                                        </td>
                                        <td align="center">
                                            月<br />
                                        </td>
                                        <td align="center">
                                            星期
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>
                                            表达式字段:
                                        </td>
                                        <td>
                                            <input type="text" name="v_min" class="col" value="*" readonly="readonly" />
                                        </td>
                                        <td>
                                            <input type="text" name="v_hour" class="col" value="*" readonly="readonly" />
                                        </td>
                                        <td>
                                            <input type="text" name="v_day" class="col" value="*" readonly="readonly" />
                                        </td>
                                        <td>
                                            <input type="text" name="v_mouth" class="col" value="*" readonly="readonly" />
                                        </td>
                                        <td>
                                            <input type="text" name="v_week" class="col" value="*" readonly="readonly" />
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="6">
                                            定时触发的规则:<input type="text" name="timing" value="* * * * *" id="cron"/>&nbsp;&nbsp;<input type="button" id="confSpec" class="sub" value="规则说明?" /><br/>
                                        </td>
                                    </tr>
                                    </tbody>
                                </table>
                            </fieldset>
                        </div>
                        <div>
                        </div>
                    </div>


                    <div style="display: none;width:620px;height:200px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;" id="conf_spec" class="easyui-layout" align="left"><!--align="left"-->
                        <pre>
                *   *   *   *   *
                |   |   |   |   |
                |   |   |   |   |______________     Day Of Week（0-7）0,7 are "Sunday"
                |   |   |   |__________________     Month of Year（1-12）
                |   |   |______________________     Day of Month（1-31）
                |   |__________________________     Hour（0-23）
                |______________________________     Minute（0-59）

                从左到右依次为：
                [分钟] [小时] [每月的某一天] [每年的某一月] [每周的某一天]
                如：0 0 * * *（每天0:00AM执行）
                    </pre>
                    </div>

                    <div class="easyui-layout" style="width:620px;height:220px; border: 1px rgb(202, 196, 196) solid;
                border-radius: 5px;">
                        <span style="float: left; color: #104E8B; font-weight: bold">&nbsp;&nbsp;备份服务器信息配置</span>
                        <br />
                        服务器系统选择：
                        <input type="radio" checked="checked" name="selectSystem" onclick="choiceSystem(this)" value="1">windows
                        <input type="radio" name="selectSystem" onclick="choiceSystem(this)" value="2" id="linuxChecked">linux<br/>
                        <div id="windows" style="display: block">
                            服务器地址：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="windowsHost" placeholder="windows server host" /><br/>
                            备份的路径：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="windowsPath" placeholder="/d:/backups/" /><br/>
                            <span style="color: #EE0000; font-size: small">*路径填写说明-----例如：D盘的backups文件夹下（/d:/backups/），当前文件夹必须存在</span><br/>
                            用户名：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="windowsUsername" placeholder="username" /><br/>
                            密码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="windowsPassword" placeholder="password" /><br/>
                            <!--<div class="line">
                                <input type="radio" checked="checked" name="week" onclick="everyTime(this)">
                                周 允许的通配符[, - * / L #]</div>-->
                        </div>
                        <div id="linux" style="display: none">
                            方式：&nbsp;&nbsp;
                            <input type="radio" checked="checked" name="saveWay" onclick="choice(this)" value="1">本地
                            <input type="radio" name="saveWay" onclick="choice(this)" value="2" id="sshChecked">ssh
                            <input type="radio" name="saveWay" onclick="choice(this)" value="3" id="ftpChecked">ftp
                            <div id="local" style="display: block">
                                备份的路径：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="localPath" placeholder="/opt/backups" /><br/>
                                <!--<div class="line">
                                    <input type="radio" checked="checked" name="mouth" onclick="everyTime(this)">
                                    月 允许的通配符[, - * /]</div>-->
                            </div>
                            <div id="ssh" style="display: none">
                                服务器地址：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="sshHost" placeholder="SSH server host" /><br/>
                                服务器端口号：<input type="text" name="sshPort" placeholder="SSH server port, default: 22" /><br/>
                                备份的路径：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="sshPath" placeholder="SSH remote path for save" /><br/>
                                连接超时时间：<input type="text" name="sshTimeout" placeholder="default: 300" /><br/>
                                <!--秘钥的位置：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="sshPrivateKey" placeholder="default: ~/.ssh/id_rsa" /><br/>-->
                                用户名：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="sshUsername" placeholder="SSH username" /><br/>
                                密码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="sshPassword" placeholder="SSH password" /><br/>
                                <!--<div class="line">
                                    <input type="radio" checked="checked" name="week" onclick="everyTime(this)">
                                    周 允许的通配符[, - * / L #]</div>-->
                            </div>
                            <div id="ftp" style="display: none">
                                服务器地址：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="ftpHost" placeholder="FTP server host" /><br/>
                                服务器端口号：<input type="text" name="ftpPort" placeholder="FTP server port, default: 21" /><br/>
                                备份的路径：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="ftpPath" placeholder="FTP remote path for save" /><br/>
                                连接超时时间：<input type="text" name="ftpTimeout" placeholder="default: 300" /><br/>
                                用户名：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="ftpUsername" placeholder="FTP username" /><br/>
                                密码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="ftpPassword" placeholder="FTP password" /><br/>
                                <!--<div class="line">
                                    <input type="radio" checked="checked" name="year" onclick="unAppoint(this)">
                                    不指定 允许的通配符[, - * /] 非必填</div>-->
                            </div>
                        </div>
                    </div>
                <br/>
                <input id="ishell" type="submit" value="保存配置" class="sub" style="margin-left: -440px"/>
                <a href="/content/backup-execute?selectSystem=1" id="backupExecuteContent"><input id="backupExecuteShell" type="button" value="备份执行" class="sub" style="margin-left: -310px"/></a><br/><br/>
            </form>
            <hr id="hrc" style="color: #8A2BE2; width: 600px ;margin-left: 10px; height:2px;" color="#8A2BE2"/><br/>
            <div style="width:620px;height:210px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;" class="easyui-layout"><!--align="left"-->
                <span style="float: left; color: #104E8B; font-weight: bold">&nbsp;&nbsp;数据恢复</span><br/>
                <form action="/content/recover" method="post" onsubmit="return backDataSubmit()">
                    服务器地址：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="host" placeholder="server host" />&nbsp;&nbsp;（默认备份的信息）<br/>
                    用户名：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="userName" placeholder="userName" />&nbsp;&nbsp;（默认备份的信息）<br/>
                    密码：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="pwd" placeholder="password" />&nbsp;&nbsp;（默认备份的信息）<br/>
                    文件的路径：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="recoverPath" placeholder="/d:/backups/" />&nbsp;&nbsp;（默认备份的信息）<br/>
                    <span style="color: #EE0000; font-size: small">*路径填写说明-----例如：D盘的backups文件夹下（/d:/backups/），当前文件夹必须存在</span><br/>
                    文件名：
                    <input id="selectOrText" type="button" value="刷新" class="sub" />
                    <!--<input id="selectOrText" type="submit" value="备份恢复" class="sub"/>--><br/><br/>
                    <input type="button" id="containerHandle" class="sub" value="容器的操作" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <a href="/content/get?selectSystem=3" target="myFrameName"><input type="button" id="recoverShell" class="sub" value="恢复脚本" /></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <input type="submit" value="备份恢复" class="sub" onclick= "return confirm('是否恢复数据');"/>
                    <!--<button id="recoverBut" class="sub">执行恢复</button>默认备份的服务器信息-->
                </form>
                <!--<button id="containerHandle" class="sub">容器的操作</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <a href="/content/get?selectSystem=3" target="myFrameName"><button id="recoverShell" class="sub">恢复脚本</button></a>-->
            </div>
            <div style="display:none; width:620px;height:80px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;" class="easyui-layout" id="containView"><!--align="left"-->
                <span style="float: left; color: #104E8B; font-weight: bold">&nbsp;&nbsp;容器应用的相关操作</span><br/>
                数据库名：&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="containerDB" value="postgres" />
                <select name="selectDB">
                    <option value="start">启动</option>
                    <option value="stop">停止</option>
                    <option value="restart">重启</option>
                </select>
                <input type="submit" id="buttonDB" value="执行" class="sub"/>
                <br/>
                应用名：&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" name="containerUSE" value="dms_validate" />
                <select name="selectUSE">
                    <option value="start">启动</option>
                    <option value="stop">停止</option>
                    <option value="restart">重启</option>
                </select>
                <input type="submit" id="buttonUSE" value="执行" class="sub"/><br/>
            </div>
        </div><!--style="display: none;width:620px;height:200px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;-->
        <div id="frameFloat" style="display: none;border: 1px rgb(202, 196, 196) solid; border-radius: 5px;"><!--style="display: none"-->
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="button" id="hiddenShell" class="sub" value="隐藏脚本" /><br/>
            <iframe align="center" id="particulars" name="myFrameName" scrolling="no" frameborder="0" height="680px" width="600px"></iframe>
        </div>

    </div>
    <div class="box-loading">
        <div class="sk-circle">
            <div class="sk-circle1 sk-child"></div>
            <div class="sk-circle2 sk-child"></div>
            <div class="sk-circle3 sk-child"></div>
            <div class="sk-circle4 sk-child"></div>
            <div class="sk-circle5 sk-child"></div>
            <div class="sk-circle6 sk-child"></div>
            <div class="sk-circle7 sk-child"></div>
            <div class="sk-circle8 sk-child"></div>
            <div class="sk-circle9 sk-child"></div>
            <div class="sk-circle10 sk-child"></div>
            <div class="sk-circle11 sk-child"></div>
            <div class="sk-circle12 sk-child"></div>
        </div>
        <div style="text-align:center;">备份恢复中...</div>
    </div>
</body>
<script type="text/javascript">
    function choice(genre) {
        var type = genre.value;
        if (type === "1") {
            $("#local").css("display", "block");
            $("#ssh").css("display", "none");
            $("#ftp").css("display", "none");
        } else if (type === "2") {
            $("#local").css("display", "none");
            $("#ssh").css("display", "block");
            $("#ftp").css("display", "none");
        } else {
            $("#local").css("display", "none");
            $("#ssh").css("display", "none");
            $("#ftp").css("display", "block");
        }
    }
    function choiceSystem(systemValue) {
        var type = systemValue.value;
        if (type === "1") {
            $("#windows").css("display", "block");
            $("#linux").css("display", "none");
            $("#getContent").attr("href", "/content/get?selectSystem=1");
            $("#backupExecuteContent").attr("href", "/content/backup-execute?selectSystem=1");
        } else {
            $("#windows").css("display", "none");
            $("#linux").css("display", "block");
            $("#getContent").attr("href", "/content/get?selectSystem=2");
            $("#backupExecuteContent").attr("href", "/content/backup-execute?selectSystem=2");
        }
    }

    $(document).ready(function() {
        //var filePath = encodeURIComponent($("#box").val());
        /*$("#recoverBut").bind("click", function () {
            window.location.href="/content/recover?recoverPath="+encodeURIComponent($('[name="recoverFile"]').val());
        });*/
        $("#buttonDB").bind("click", function () {
            window.location.href="/container/handle?containerName="+encodeURIComponent($('[name="containerDB"]').val())+"&handle="+encodeURIComponent($('[name="selectDB"]').val());
        });
        $("#buttonUSE").bind("click", function () {
            window.location.href="/container/handle?containerName="+encodeURIComponent($('[name="containerUSE"]').val())+"&handle="+encodeURIComponent($('[name="selectUSE"]').val());
        });
        $("#containerHandle").bind("click", function () {
            $("#containView").toggle();
            /*return false;*/
        });
        $("#recoverShell").bind("click", function () {
            /*window.location.href="/content/get?selectSystem=3";*/
            $("#mainFrame").css("float", "left").css("margin-right", "10px");
            $("#frameFloat").css("float", "left").css("display", "block");
            $("#wshell").css("margin-left","20px");
            $("#ishell").css("margin-left","-40px");
            /*$("#hrc").css("margin-left","10px");*/
            /*$("#showAndConceal").show();*/
            /*return false;*/
        });
        $("#confSpec").bind("click", function () {
            $("#conf_spec").toggle();
            /*return false;*/
        });
        $("#watchShell").bind("click", function () {
            $("#mainFrame").css("float", "left").css("margin-right", "10px");
            $("#frameFloat").css("float", "left").css("display", "block");
            $("#wshell").css("margin-left","20px");
            $("#ishell").css("margin-left","-100px");
            $("#backupExecuteShell").css("margin-left","30px");
            /*$("#hrc").css("margin-left","10px");*/
            /*$("#showAndConceal").show();*/
            //$("#particulars").attr("src", window.location.href="/content/get");
        });
        $("#hiddenShell").bind("click", function () {
            $("#mainFrame").css("float", "").css("margin-right", "");
            $("#frameFloat").css("float", "").css("display", "none");
            $("#wshell").css("margin-left","-650px");
            $("#ishell").css("margin-left","-440px");
            $("#backupExecuteShell").css("margin-left","-310px");
            /*$("#hrc").css("margin-left","10px");*/
            /*$("#showAndConceal").show();*/
            //$("#particulars").attr("src", window.location.href="/content/get");
        });
        $('[name="addfp"]').bind("click", function () {
            /*var fpLength = $('[name="fp"]').length;
            alert(fpLength)
            if (fpLength < 2) {
                $('[name="delfp"]').toggle();
            }
            alert($('[name="addfp"]').parent().html())
            $('[name="addfp"]').parent().after("<div name='fp'>"+$('[name="addfp"]').parent().html()+"</div>");*/
            $('[name="addfp"]').parent().append("<div name='fp'></span><input name='fpValue' type='text' placeholder='/opt/backups'></div>");
            $("#hepx").height($("#hepx").height() + 20);
            return false;
        });
        $('[name="delfp"]').bind("click", function () {
            /*var fpLength1 = $('[name="fp"]').length;
            alert(fpLength1)
            if (fpLength1 < 2) {
                $('[name="delfp"]').toggle();
            }else{
                $('[name="delfp"]').parent().parent().children("div:last").remove();
            }*/
            var fpLength = $('[name="fp"]').length;
            if (fpLength > 1) {
                $('[name="delfp"]').parent().children("div:last").remove();
                $("#hepx").height($("#hepx").height() - 20);
            }
            return false;
        });
        $("#ishell").bind("click", function () {
            var filePathString = "";
            $("input[name='fpValue']").each(function () {
                filePathString += $(this).val() + " ";
            })
            $("#filePathString").val(filePathString.substring(0, filePathString.length - 1));
            return;
        });
        $("#selectOrText").bind("click", function () {
            getCheckBox();
        });
        /*$('[name="recoverPath"]').blur(getCheckBox());*/
        /*$('[name="recoverPath"]').change(getCheckBox());*/
        /*$(".field").change(function(){
            $(this).css("background-color","#FFFFCC");
        });*/
    });

    /*function showAndConcealShell() {
        $("#frameFloat").toggle();
        var displayValue = $("#frameFloat").css("display");
        if (displayValue == "none"){
            $("#mainFrame").css("float", "").css("margin-right", "");
            $("#frameFloat").css("float", "");
            $("#wshell").css("margin-left","-775px");
            $("#ishell").css("margin-left","-375px");
        } else {
            $("#mainFrame").css("float", "left").css("margin-right", "10px");
            $("#frameFloat").css("float", "left");
            $("#wshell").css("margin-left","-100px");
            $("#ishell").css("margin-left","-40px");
        }
    }*/

    window.onload=function() {
        $.ajax({
            type: 'get',
            url: '/content/backfill',
            async: true,
            success: function (data) {
                //var list = document.getElementsByTagName("input");
                //alert("1");
                //alert(data);
                if (null != data && "" !== data) {
                    var keyAndValues = data.split("&&");
                    var keyAndValue = [];
                    var selectSys = "";
                    for (var i = 0; i < keyAndValues.length; i++){
                        keyAndValue = keyAndValues[i].split("=");
                        if (keyAndValue[0] === "filePathString"){
                            $('[name='+ keyAndValue[0] + ']').val(keyAndValue[1]);
                            //alert(keyAndValue[1])
                            if ( "" !== keyAndValue[1]){
                                var fpValues = keyAndValue[1].split(" ");
                                $('[name="fpValue"]').val(fpValues[0]);
                                if (fpValues.length > 1){
                                    $("#hepx").height($("#hepx").height() + 20*(fpValues.length-1));
                                    for (var j = 1; j < fpValues.length; j++){
                                        $('[name="addfp"]').parent().append("<div name='fp'></span><input name='fpValue' type='text' placeholder='/opt/backups'></div>");
                                        $('[name="fpValue"]:last').val(fpValues[j]);
                                    }
                                }
                            }
                        }else if (keyAndValue[0] === "selectSystem") {
                            selectSys = keyAndValue[1];
                            if (keyAndValue[1] === "2") {
                                $("#linuxChecked").attr('checked', 'checked');
                                $("#windows").css("display", "none");
                                $("#linux").css("display", "block");
                                $("#getContent").attr("href", "/content/get?selectSystem=2");
                                $("#backupExecuteContent").attr("href", "/content/backup-execute?selectSystem=2");
                            }

                        }else if (keyAndValue[0] === "saveWay") {
                            if (keyAndValue[1] === "2") {
                                $("#sshChecked").attr('checked', 'checked');
                                $("#local").css("display", "none");
                                $("#ssh").css("display", "block");
                                $("#ftp").css("display", "none");
                            }else if(keyAndValue[1] === "3") {
                                $("#ftpChecked").attr('checked', 'checked');
                                $("#local").css("display", "none");
                                $("#ssh").css("display", "none");
                                $("#ftp").css("display", "block");
                            }
                        }else if (keyAndValue[0] === "serviceIP"){
                            $("#serviceIP").html("服务器"+keyAndValue[1]+"备份配置界面")
                            /*$('[name='+ keyAndValue[0] + ']').val(keyAndValue[1]);*/
                        }else{
                            $('[name='+ keyAndValue[0] + ']').val(keyAndValue[1]);
                        }
                    }
                    if (selectSys === "1"){
                        $('[name="host"]').val($('[name="windowsHost"]').val());
                        $('[name="recoverPath"]').val($('[name="windowsPath"]').val());
                        $('[name="userName"]').val($('[name="windowsUsername"]').val());
                        $('[name="pwd"]').val($('[name="windowsPassword"]').val());
                    } else {
                        $('[name="host"]').val($('[name="sshHost"]').val());
                        $('[name="recoverPath"]').val($('[name="sshPath"]').val());
                        $('[name="userName"]').val($('[name="sshUsername"]').val());
                        $('[name="pwd"]').val($('[name="sshPassword"]').val());
                    }
                }
                if("" !== $('[name="host"]').val() && "" !== $('[name="recoverPath"]').val() && "" !== $('[name="userName"]').val() && "" !== $('[name="pwd"]').val()){
                    getCheckBox();
                }
            },error:function (data) {
                //alert("2");
                alert("请求失败");
            }
        });
    };

    /*$('[name="recoverPath"]').bind("input propertychange", getCheckBox());*/

    function getCheckBox(){
        if ($('[name="recoverFile"]').length > 0){
            $('[name="recoverFile"]').remove();
        }
        if ($("#checkboxDes").length > 0){
            $("#checkboxDes").remove();
        }
        $.ajax({
            type: 'get',
            url: '/content/check-box-value',
            async: true,
            data:{
                "ip":$('[name="host"]').val(),
                "username":$('[name="userName"]').val(),
                "password":$('[name="pwd"]').val(),
                "path":$('[name="recoverPath"]').val()
            },
            success:function (data) {
                if (null != data && "" !== data && data.indexOf("The file does not exist") === -1){
                    var checkboxes = data.split("\n");
                    //alert("1")
                    if(null != checkboxes && checkboxes.length > 0){
                        /*$("#pathText").attr("name", "recoverFileBat").css("display", "none");
                        $("#pathSelect").attr("name", "recoverFile").css("display", "block");*/
                        $("#selectOrText").before("<select id='pathSelect' name='recoverFile'></select><span id='checkboxDes' style='font-size: small'>（下拉框默认为路径下的所有.tar.gz文件）</span>");
                        var isHave = 0;
                        for (var i = 0; i < checkboxes.length; i++) {
                            if(checkboxes[i].indexOf(".tar.gz") !== -1){
                                //alert("2")
                                //alert("<option value=" + checkboxes[i] +">"+ checkboxes[i] +"</option>");
                                $("#pathSelect").append("<option value=" + checkboxes[i] +">"+ checkboxes[i] +"</option>");
                                isHave++;
                                //alert(checkboxes[i]);
                            }
                        }
                        if (0 === isHave){
                            $('[name="recoverFile"]').remove();
                            $("#checkboxDes").remove();
                            $("#selectOrText").before("<input type='text' name='recoverFile' placeholder='backup.tar.gz' style='width: 320px;'/>");
                        }
                    }
                }else{
                    $("#selectOrText").before("<input type='text' name='recoverFile' placeholder='backup.tar.gz' style='width: 320px;'/>");
                }
            }, error:function () {
                $("#selectOrText").before("<input type='text' name='recoverFile' placeholder='backup.tar.gz' style='width: 320px;'/>");
            }
        });
    }

    function backDataSubmit (){
        $(".box-loading").css("display", "block");
        return true;
    }

    /*$(function () {

    })*/
</script>
</html>